---
title: 事件处理程序
date: 2025-09-10
tags: ["javascript", "事件处理程序"]
excerpt: "利用事件处理程序为页面添加事件"
---

## 事件处理程序

HTML事件可以是浏览器行为，也可以是用户行为。

以下是HTML事件的实例：

1. HTML页面完成加载
2. HTML `input`字段改变时
3. HTML按钮被点击

在事件触发时，可以用JavaScript执行一些代码。

HTML元素中可以添加事件属性，使用JavaScript代码来添加HTML元素。

事件处理程序分为：

1. 内联事件处理器 (HTML属性)
2. 脚本事件处理器（DOM0级事件处理）
3. DOM2级事件处理

下面是一些常见的HTML事件。

|事件|描述|
|---|---|
|onchange|HTML元素改变|
|onclick|用户点击HTML元素|
|onmouseover|鼠标指针移动到指定的元素上时发生|
|onmouseout|用户从一个HTML元素上移开鼠标时发生|
|onkeydown|用户按下键盘按键|
|onload|浏览器已完成页面的加载|

### 内联事件处理器 (HTML属性)

内联事件处理器是直接在HTML标签中定义事件，它的语法是`on<event>="JavaScript code"`，示例如下

```html
<button onclick="clickHandle()">按钮</button>

<script>
    function clickHandle() {
        console.log("点击了按钮")
    }
</script>
```

点击按钮后控制台输出。

```console
点击了按钮
```

>缺点是直接在HTML标签中定义，混合HTML与JS，难以维护，只能绑定一个处理函数。

### 脚本事件处理器（DOM0级事件处理）

在JavaScript中，将函数赋值给DOM元素的`on<event>`属性。

```html
<button id="btn">按钮</button>

<script>
    let btn = document.getElementById("btn")

    btn.onclick = function() {
        console.log("点击了按钮")
    }
</script>
```

点击按钮后控制台输出

```console
点击了按钮
```

相对于内联事件处理器DMO0级处理事件将HTML元素与JS分离，更方便维护。

主要缺点有：

1. 无法添加多个处理器：每个事件类型只能绑定一个处理函数。后续的赋值会覆盖之前的。

    ```javascript
    btn.onclick = function1
    btn.onclick = function2 // function1 被覆盖了，只有 function2 会执行
    ```

2. 事件流控制有限：默认只在**冒泡阶段**触发，无法选择在捕获阶段触发。

3. 删除事件：通过将事件属性设置为`null`来删除。

    ```javascript
    btn.onclick = null // 删除点击事件处理函数
    ```

### DOM2级事件

使用`addEventListener()`方法。

```html
<button id="btn">按钮</button>

<script>
    let btn = document.getElementById("btn")

    btn.addEventListener("click", function(){
        console.log("点击了按钮1")
    })
    btn.addEventListener("click", function(){
        console.log("点击了按钮2")
    })
</script>
```

点击按钮后控制台输出

```console
点击了按钮1
点击了按钮2
```

使用DOM2级事件处理的优点：

1. 可以为同一元素的同一事件类型添加多个监听器。

2. 可以控制事件在捕获或冒泡阶段触发（通过第三个参数）。

3. 可以使用`removeEventListener()`精确移除监听器。
