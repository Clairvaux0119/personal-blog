---
title: 数组
date: 2025-09-02
tags: ["javascript", "数组"]
excerpt: "学习使用数组和数组方法"
---

## 数组

数组 (array) 是按照次序排列的一组值。每个值的位置都有编号（从0开始），整个数组用方括号表示。

```javascript
let arr = ['It', 'is', 'an', 'apple']
```

两端方括号`[]`是数组的标志。`It`是0号位置，`is`是1号位置，`an`是2号位置，`apple`是3号位置。

除了在定义时赋值，数组也可以先定义后赋值。

```javascript
let arr = []

arr[0] = 'It'
arr[1] = 'is'
arr[2] = 'an'
arr[3] = 'apple'
```

任何类型的数据，都可以放入数组中。

```javascript
let arr = [100, [1, 2, 3], false, 'char']
```

下标未赋值的话。

```javascript
let arr = ['It', 'is', 'an', 'apple']
console.log(arr)
```

输出结果

```console
['It', 'is', 'an', 'apple']
```

如果数组下标大于数组长度。

```javascript
let arr = ['It', 'is', 'an', 'apple']
console.log(arr[5])
```

输出结果

```console
undefined
```

如果数组内部嵌套其他数组，这个数组即为N维数组，`N = 数组嵌套层数`。

```javascript
let arr = [[1, 2], [3, 4]]
console.log(arr[0][1])
console.log(arr[1][0])
```

输出结果

```console
2
3
```

### length属性

数组的length属性返回的是数组的成员数量。

```javascript
let arr = ['It', 'is', 'an', 'apple']
console.log(arr.length)
```

输出结果

```console
4
```

## 数组的遍历

数组的遍历可以考虑使用for循环或while循环。

```javascript
let arr = ['It', 'is', 'an', 'apple']
        
// for循环
console.log('for循环:')
for (let i = 0; i < arr.length; i++) {
    console.log(arr[i])
}

// while循环
console.log('while循环:')
let i = 0
while (i < arr.length) {
    console.log(arr[i])
    i++
}
```

输出结果

```console
for循环:
It
is
an
apple
while循环:
It
is
an
apple
```

也可以使用for...in遍历数组。

```javascript
let arr = ['It', 'is', 'an', 'apple']

for(let i in arr) {
            console.log(arr[i])
        }
```

输出结果

```console
It
is
an
apple
```

## 数组方法

### 数组静态方法 Array.isArray()

`Array.isArray()`方法返回一个布尔值，表示参数是否为数组。他可以弥补`typeof`运算符的不足。

```javascript
let arr = ['It', 'is', 'an', 'apple']

console.log(typeof(arr))
console.log(typeof(arr))

if (Array.isArray(arr)) {
    console.log('Array')
} else {
    console.log('Not Array')
}
```

输出结果

```console
object
Array
```

### push()/pop()

`push()`方法用于在数组的**末端**添加一个或多个元素，并返回添加新元素后的**数组长度**。注意，该方法会改变原数组。

```javascript
let arr = []
console.log(arr.push('Hello'))
console.log(arr.push('World'))
console.log(arr.push('!'))
console.log(arr.push(true))
console.log(arr)
```

输出结果

```console
1
2
3
4
['Hello', 'World', '!', true]
```

`pop()`方法用于删除数组的最后一个元素，并返回该元素。注意，该方法会改变原数组。

```javascript
console.log(arr.pop())
console.log(arr)
```

输出结果

```console
true
['Hello', 'World', '!']
```

### shift()/unshift

`shift()`方法用于删除数组的**第一个**元素，并返回该元素。注意，该方法会改变原数组。

```javascript
let arr = ['Hello', 'World', '!']

console.log(arr)
console.log(arr.shift())
console.log(arr)
```

输出结果

```console
['Hello', 'World', '!']
Hello
['World', '!']
```

利用`shift()`方法可以遍历并清空一个数组。

```javascript
let list = [1, 2, 3, 4, 5]
let item

console.log(list)

while (item = list.shift()) {
    console.log(item)
}

console.log(list)
```

输出结果

```console
[1, 2, 3, 4, 5]
1
2
3
4
5
[]
```

**注意** 如果数组中的元素包含0, `false`, `null`, `undefined`等，并不能完整的遍历整个数组。

```javascript
let list = [0, 1, 2, 3, 4, 5]
let item

console.log(list)

while (item = list.shift()) {
    console.log(item)
}

console.log(list)
```

输出结果

```console
[0, 1, 2, 3, 4, 5]
0
[1, 2, 3, 4, 5]
```

尝试改成

```javascript
let list = [0, 1, 2, 3, 4, 5]
let item

console.log(list)

while (list.length) {
            ietm = list.shift()
            console.log(ietm)
        }

console.log(list)
```

输出结果

```console
[0, 1, 2, 3, 4, 5]
0
1
2
3
4
5
[]
```

`unshift()`方法用于在数组的第一个位置添加元素，并返回添加新元素后的**数组长度**。注意，该方法会改变原数组。

```javascript
let arr = ['Hello', 'World', '!']
        
console.log(arr)
console.log(arr.unshift('Please'))
console.log(arr)
```

输出结果

```console
['Hello', 'World', '!']
4
['Please', 'Hello', 'World', '!']
```

`unshift()`方法可以接受多个参数，这些参数都会添加到目标数组头部。

```javascript
let arr = ['Hello', 'World', '!']
        
console.log(arr)
console.log(arr.unshift('Please', 'say'))
console.log(arr)
```

输出结果

```console
['Hello', 'World', '!']
5
['Please', 'say', 'Hello', 'World', '!']
```

### join()

`join()`用于以指定参数作为分隔符，将所有数组成员连接为一个**字符串**返回。如果不提供参数，默认用逗号分隔。

```javascript
let arr = [1, 2, 3, 4]
        
console.log(arr.join(' '))
console.log(arr.join('|'))
console.log(arr.join())
```

输出结果

```console
1 2 3 4
1|2|3|4
1,2,3,4
```

如果数组成员是`undefined`或`null`或空位，会被转成空字符串。

```javascript
let arr1 = ['a', undefined, null, 'b']
let arr2 = ['a', , 'b']

console.log(arr1.join('#')) 
console.log(arr2.join('-'))
```

输出结果

```console
a###b
a--b
```

数组的`join()`和字符串的`spilt()`可以实现数组与字符串的互换。

```javascript
let arr = ['a', 'b', 'c']
let myArr = arr.join('')

console.log(myArr)
console.log(myArr.split(''))
```

输出结果

```console
abc
['a', 'b', 'c']
```

### concat()

`concat()`方法用于多个数组的合并。它将新数组的成员添加到原数组成员的尾部，然后返回一个新数组，**原数组不变**。

```javascript
let arr1 = ['Hello']
let arr2 = ['World']

console.log(arr1.concat(arr2))
console.log(arr1)
console.log(arr2)
```

输出结果

```console
['Hello', 'World']
['Hello']
['World']
```

除了数组作为参数，`concat()`也接受其他类型的值作为参数，添加目标数组尾部。

```javascript
let arr = [1, 2, 3]

console.log(arr.concat(4, 5, '6'))
```

输出结果

```console
[1, 2, 3, 4, 5, '6']
```

>**应用场景**
>
>上拉加载，合并数据

对于下面的代码

```javascript
let arr = [1, 2, 3]

console.log(arr.concat(4, 5, 6, [7, 8, 9]))
```

输出结果

```console
[1, 2, 3, 4, 5, 6, 7, 8, 9]
```

>**`concat()` 处理规则**
>
>对于基本类型值（数字、字符串等）：直接添加到新数组。  
>对于数组：展开数组，将其元素逐个添加到新数组。

`concat()`方法的特点：

+ **不修改原数组**：返回新数组，原数组保持不变

+ **浅层展开**：只展开一层的数组，不会递归展开嵌套数组。

+ **支持多个参数**：可以同时传入多个值或数组。

+ **类型保持**：保持原始元素的类型。

ES6中的扩展运算符可以实现类似效果。

```javascript
let arr1 = ['Hello']
let arr2 = ['World']

console.log(arr1.concat(arr2))
console.log([...arr1, ...arr2])
```

输出结果

```console
['Hello', 'World']
['Hello', 'World']
```

### reverse()

`reverse()`方法用于颠倒排列数组元素，返回改变后的数组。注意，该方法将改变原数组。

```javascript
let arr = ['a', 'b', 'c']

console.log(arr)
console.log(arr.reverse())
console.log(arr)
```

输出结果

```console
['a', 'b', 'c']
['c', 'b', 'a']
['c', 'b', 'a']
```

如果要实现一个字符串的反转排列

```javascript
let str = 'hello'
console.log(str.split('').reverse().join(''))
```

输出结果

```console
olleh
```

### indexOf()

`indexOf()`方法返回给定元素在数组中**第一次**出现的位置，如果没有出现则返回-1。

```javascript
let arr = ['a', 'b', 'c', 'b']

console.log(arr.indexOf('b'))
console.log(arr.indexOf('d'))
```

输出结果

```console
1
-1
```

`indexOf()`方法还可以接受第二个参数，表示搜索开始位置（包括该位置）。

```javascript
console.log(arr.indexOf('b', 1))
console.log(arr.indexOf('b', 2))
```

输出结果

```console
1
-1
```
