---
title: 数组扩展
date: 2025-09-24
tags: ["javascript", "数组", "ES6"]
excerpt: "ES6数组扩展与新增方法"
---

## 数组扩展

### 扩展运算符

扩展运算符（spread）的形式是三个点（`...`）。作用是将一个数组转为用逗号分隔的参数序列。

```javascript
console.log(...[1, 2, 3])
console.log(1, ...[2, 3, 4], 5)
```

控制台输出

```console
1 2 3
1 2 3 4 5
```

如果要扩展的数组包含空位，使用扩展运算符会输出`undefined`。

```javascript
console.log(...[1, , 3])
```

控制台输出

```console
1 undefined 3
```

#### 替代`apply()`方法

由于扩展运算符可以展开数组，所以不再需要`apply()`方法将数组转为函数的参数了。

`apply()`方法语法

```javascript
function.apply(thisArg, [argsArray])
```

其中`thisArg`是函数运行时使用的`this`值，`argsArray`是一个数组或类数组对象，包含传递给函数的参数。

实现求数组中的最大值

```javascript
const num = [10, 20, 30, 40]

console.log(Math.max.apply(null, num))
```

控制台输出

```console
40
```

使用扩展运算符

```javascript
console.log(Math.max(...num))
```

控制台输出

```console
40
```

#### 合并数组

扩展运算符提供了数组合并的新写法。

```javascript
let arr1 = ['Hello']
let arr2 = ['World']

// ES5的合并数组
console.log(arr1.concat(arr2))

// ES6的合并数组
console.log([...arr1, ...arr2])
```

控制台输出

```console
['Hello', 'World']
['Hello', 'World']
```

### 数组新增方法

#### `Array.from()`

`Array.from()`可以将类数组对象或可迭代对象转化为数组。

参数为数组的话

```javascript
console.log(Array.from([1, 2]))
```

控制台输出

```console
[1, 2]
```

常见的类数组有三类：arguments、元素集合、类似数组的对象。它们都只能使用数组的读取方式和length属性，不能使用数组方法。

##### arguments

arguments是一个类数组对象，在函数内部自动可用，它包含了函数被调用时传入的所有参数。

```javascript
function example() {
    console.log(arguments)
}

example(1, 2, 3, "hello")
```

控制台输出

```console
Arguments(4) [1, 2, 3, 'hello', callee: ƒ, Symbol(Symbol.iterator): ƒ]
0: 1
1: 2
2: 3
3: 'hello'
...
```

使用`Array.from()`方法

```javascript
function example() {
    console.log(Array.from(arguments))
}

example(1, 2, 3, "hello")
```

控制台输出

```console
[1, 2, 3, 'hello']
```

转成数组后就可以使用数组的各种方法对其进行操作。

##### 元素集合

元素集合是指DOM操作中返回的类数组对象，它们表示一组DOM元素，但不是真正的数组。

常见的元素集合有

1. HTMLCollection 由以下方法返回：

   + `document.getElementsByClassName()`
   + `document.getElementsByTagName()`
   + `element.children`

2. NodeList 由以下方法返回：

   + `document.querySelectorAll()`
   + `element.childNodes`

```html
<h3>标题</h3>
<h3>标题</h3>
<h3>标题</h3>
<script>
    let titles = document.querySelectorAll("h3")

    console.log(titles)
</script>
```

控制台输出

```console
NodeList(3) [h3, h3, h3]
```

使用`Array.from()`方法

```javascript
let titles = document.querySelectorAll("h3")

console.log(Array.from(titles))
```

控制台输出一个数组

```console
[h3, h3, h3]
```

##### 自定义的类数组对象

类数组对象是指具有**数字索引**和`length`属性，但不是真正数组的对象。它们看起来像数组，但不能直接使用数组方法。

下面自定义一个类数组对象

```javascript
let user = {
    "0": "Bob",
    "1": 20,
    "2": "男",
    length: 3
}
```

使用数字索引访问属性

```javascript
console.log(user[0])
console.log(user.length)
```

控制台输出

```console
Bob
3
```

可以看到与数组类似，可以使用`Array.from()`方法将其转换成真正的数组。

```javascript
console.log(Array.from(user))
```

控制台输出

```console
['Bob', 20, '男']
```

#### `Array.of()`

`Array.of()`方法用于将一组值装换成数组。

对于

```javascript
Array.of(1, 2, 3)
```

在控制台上打印

```console
[1, 2, 3]
```
